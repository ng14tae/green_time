<div class="mt-6" data-controller="mood-checker" data-mood-checker-record-id-value="<%= record.id %>">
    <!-- æ°—åˆ†é¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->

    <%
        is_disabled = defined?(disabled) && disabled
        is_mood_success = defined?(show_mood_success) && show_mood_success
        is_comment_success = defined?(show_comment_success) && show_comment_success
        %>

    <div class="mt-6 <%= 'opacity-50 pointer-events-none' if is_disabled %>"
        data-controller="mood-checker"
        data-mood-checker-record-id-value="<%= record&.id %>">

    <!-- ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    <% if is_disabled %>
        <p class="text-center text-yellow-200 mb-4">â° ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å¾Œã«æ°—åˆ†ã‚’è¨˜éŒ²ã§ãã¾ã™</p>
    <% end %>

    <div class="mb-6">
        <p class="text-lg mb-3">ä»Šã®æ°—åˆ†ã‚’æ•™ãˆã¦ãã ã•ã„ ğŸŒ¤ï¸ï¼ˆä»»æ„ï¼‰</p>

        <div class="flex justify-center gap-4">
            <button data-action="click->mood-checker#select" data-mood="happy"
                    class="mood-btn bg-green-400 hover:bg-green-500 text-white px-4 py-2 rounded transition-all"
                    <%= 'disabled style="opacity: 0.5;"'.html_safe if defined?(show_mood_success) && show_mood_success %>>
            ğŸ˜Š è‰¯ã„
            </button>
            <button data-action="click->mood-checker#select" data-mood="neutral"
                    class="mood-btn bg-yellow-400 hover:bg-yellow-500 text-white px-4 py-2 rounded transition-all"
                    <%= 'disabled style="opacity: 0.5;"'.html_safe if defined?(show_mood_success) && show_mood_success %>>
            ğŸ˜ æ™®é€š
            </button>
            <button data-action="click->mood-checker#select" data-mood="sad"
                    class="mood-btn bg-blue-400 hover:bg-blue-500 text-white px-4 py-2 rounded transition-all"
                    <%= 'disabled style="opacity: 0.5;"'.html_safe if defined?(show_mood_success) && show_mood_success %>>
            ğŸ˜¢ æ‚ªã„
            </button>
        </div>

        <!-- æ°—åˆ†é¸æŠã®çŠ¶æ…‹è¡¨ç¤º -->
        <div data-mood-checker-target="moodStatus"
            class="text-center mt-2 <%= defined?(show_mood_success) && show_mood_success ? '' : 'hidden' %>">
        </div>
    </div>

    <!-- æ°—åˆ†ãƒ¡ãƒ¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div>
            <p class="text-lg mb-3 py-4">ğŸ’­ æ°—åˆ†ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰</p>

            <textarea
                data-mood-checker-target="comment"
                placeholder="ä»Šã®æ°—åˆ†ã«ã¤ã„ã¦è©³ã—ãæ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ"
                class="textarea textarea-bordered w-full bg-white resize-none"
                style="color: black !important;"
                rows="3"
                maxlength="140"
                <%= 'disabled style="opacity: 0.5;"'.html_safe if defined?(show_comment_success) && show_comment_success %>><%= record.mood&.comment %></textarea>

            <!-- æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ -->
            <div class="flex justify-between items-center mt-2">
                <div data-mood-checker-target="commentStatus"
                    class="text-sm text-green-600 <%= defined?(show_comment_success) && show_comment_success ? '' : 'hidden' %>">
                </div>
                <div class="text-sm text-gray-300">
                    <span data-mood-checker-target="counter"><%= record.mood&.comment&.length || 0 %></span>/140
                </div>
            </div>

            <!-- ãƒ¡ãƒ¢ä¿å­˜ãƒœã‚¿ãƒ³ -->
            <button
                data-action="click->mood-checker#saveComment"
                data-mood-checker-target="saveButton"
                class="btn btn-primary btn-lg px-16 py-4 text-2xl shadow-lg w-full mt-3"
                <%= 'disabled style="opacity: 0.5;"'.html_safe if defined?(show_comment_success) && show_comment_success %>>
                <% if defined?(show_comment_success) && show_comment_success %>
                    ä¿å­˜æ¸ˆã¿
                <% else %>
                    æ°—åˆ†ãƒ¡ãƒ¢ã‚’ä¿å­˜
                <% end %>
            </button>
        </div>
    </div>
</div>