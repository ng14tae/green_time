<div class="hero min-h-screen bg-gradient-to-br from-blue-400 to-blue-600">
    <div class="hero-content text-center text-white">
        <div class="max-w-md py-16">
            <h1 class="text-5xl font-bold mb-8">Hello!</h1>
            <p class="text-xl mb-4">＼今日も素晴らしい一日にしましょう！／</p>

            <!-- 緑ちゃんブース-->
            <%= image_tag "kuma.png", alt: "ポチ", id: "pochi-image", class: "mx-auto w-48 h-48 object-contain" %>
                <div class="max-w-md mb-8">
                <p><%= current_plant_name %></p>
                </div>

            <!-- チェックインブース-->
            <div class="work-summary mb-8 bg-white/20 rounded-lg p-6">
                <p class="text-lg">
                <%= Date.current.strftime("%Y年%m月%d日 (%a)") %></p><br>

                <% if @today_record.present? %>
                <p class="text-lg">現在時刻</p>
                <p class="text-3xl font-mono" id="current-time">
                    <%= Time.current.strftime("%H:%M:%S") %></p><br>

                <p class="text-lg mb-2">チェックイン時刻</p>
                <p class="text-3xl font-mono mb-4">
                    <%= @today_record.checkin_time.strftime("%H:%M") %>
                </p>

                <p class="text-lg mb-2">勤務時間</p>
                <p class="text-3xl font-mono" id="working-time"
                    data-checkin-time="<%= @today_record.checkin_time.in_time_zone('Asia/Tokyo').iso8601 %>">
                    <%= time_diff(@today_record.checkin_time, Time.current) %>
                </p>
                <% else %>
                <p class="text-lg">現在時刻</p>
                <p class="text-3xl font-mono" id="current-time">
                    <%= Time.current.strftime("%H:%M:%S") %>
                </p>
                <% end %>
            </div>

            <div id="checkin-section">
            <% if @today_record.present? %>
                <!-- チェックイン済みの場合 -->
                <button class="btn btn-lg w-full bg-gray-400 text-gray-600" disabled>
                    水やり済み
                </button>
            <% else %>
                <!-- 未チェックインの場合 -->
                <%= form_with url: checkin_checkinout_records_path,
                            method: :post,
                            data: { turbo_stream: true, turbo: true } do |f| %>
                <%= f.submit "水をあげる", id: "checkin-button",
                            class: "btn btn-primary btn-lg px-16 py-4 text-2xl shadow-lg w-full" %>
                <% end %>
            <% end %>
            </div>

        </div>
    </div>
</div>


<!-- 緑ちゃんアニメーション -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.addEventListener('click', function(event) {
        if (event.target.id === 'checkin-button') {
            const pochiImage = document.getElementById('pochi-image');
            if (pochiImage) {
                // 超派手スパークル効果を追加
                pochiImage.classList.add('pochi-mega-sparkle');

                // 1秒後にクラスを削除
                setTimeout(function() {
                    pochiImage.classList.remove('pochi-mega-sparkle');
                }, 1000);
            }
        }
    });
});
</script>

<style>
#pochi-image {
    position: relative;
    transition: all 0.6s ease;
    border-radius: 50%;
    overflow: visible; /* 派手な効果のため、はみ出しを許可 */
}

/* 超派手スパークル効果のクラス */
.pochi-mega-sparkle {
    transform: scale(1.15);
    filter: brightness(1.5) saturate(1.8) contrast(1.3);
    box-shadow: 
        0 0 40px rgba(255, 215, 0, 1),
        0 0 80px rgba(255, 105, 180, 0.8),
        0 0 120px rgba(0, 255, 255, 0.6),
        0 0 160px rgba(255, 255, 255, 0.4);
    animation: mega-pulse 1s ease-out;
}

/* パルス効果 */
@keyframes mega-pulse {
    0%, 100% { transform: scale(1.15); }
    25% { transform: scale(1.25); }
    50% { transform: scale(1.2); }
    75% { transform: scale(1.3); }
}

/* 1層目：内側のスパークル */
.pochi-mega-sparkle::before {
    content: '';
    position: absolute;
    top: -20px;
    left: -20px;
    right: -20px;
    bottom: -20px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 1;
    background:
        /* 大きなスパークル */
        radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 1) 3px, transparent 6px),
        radial-gradient(circle at 80% 15%, rgba(255, 215, 0, 1) 4px, transparent 8px),
        radial-gradient(circle at 15% 80%, rgba(255, 20, 147, 1) 3px, transparent 6px),
        radial-gradient(circle at 85% 85%, rgba(0, 255, 255, 1) 4px, transparent 8px),

        /* 中サイズのスパークル */
        radial-gradient(circle at 50% 10%, rgba(255, 255, 255, 0.9) 2px, transparent 4px),
        radial-gradient(circle at 10% 50%, rgba(255, 105, 180, 0.9) 2px, transparent 4px),
        radial-gradient(circle at 90% 50%, rgba(255, 215, 0, 0.9) 2px, transparent 4px),
        radial-gradient(circle at 50% 90%, rgba(138, 43, 226, 0.9) 2px, transparent 4px),

        /* 小さなスパークル */
        radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8) 1px, transparent 2px),
        radial-gradient(circle at 70% 30%, rgba(0, 191, 255, 0.8) 1px, transparent 2px),
        radial-gradient(circle at 30% 70%, rgba(255, 69, 0, 0.8) 1px, transparent 2px),

    animation: mega-sparkle-explosion 1s ease-out;
}

/* 2層目：外側の大爆発 */
.pochi-mega-sparkle::after {
    content: '';
    position: absolute;
    top: -40px;
    left: -40px;
    right: -40px;
    bottom: -40px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 2;
    background:
        /* 超大型スパークル */
        radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 1) 5px, transparent 10px),
        radial-gradient(circle at 75% 25%, rgba(255, 215, 0, 1) 6px, transparent 12px),
        radial-gradient(circle at 25% 75%, rgba(255, 20, 147, 1) 5px, transparent 10px),
        radial-gradient(circle at 75% 75%, rgba(0, 255, 255, 1) 6px, transparent 12px),

        /* 放射状のスパークル */
        radial-gradient(circle at 50% 5%, rgba(255, 255, 255, 0.9) 3px, transparent 6px),
        radial-gradient(circle at 95% 50%, rgba(255, 105, 180, 0.9) 3px, transparent 6px),
        radial-gradient(circle at 50% 95%, rgba(255, 215, 0, 0.9) 3px, transparent 6px),
        radial-gradient(circle at 5% 50%, rgba(138, 43, 226, 0.9) 3px, transparent 6px),

        /* ランダムな小スパークル */
        radial-gradient(circle at 15% 35%, rgba(255, 255, 255, 0.7) 1px, transparent 2px),
        radial-gradient(circle at 85% 35%, rgba(0, 191, 255, 0.7) 1px, transparent 2px),
        radial-gradient(circle at 15% 65%, rgba(255, 69, 0, 0.7) 1px, transparent 2px),
        radial-gradient(circle at 85% 65%, rgba(255, 255, 255, 0.7) 1px, transparent 2px),
        radial-gradient(circle at 35% 15%, rgba(255, 20, 147, 0.7) 1px, transparent 2px),
        radial-gradient(circle at 65% 15%, rgba(255, 215, 0, 0.7) 1px, transparent 2px),
        radial-gradient(circle at 35% 85%, rgba(0, 255, 255, 0.7) 1px, transparent 2px),
        radial-gradient(circle at 65% 85%, rgba(138, 43, 226, 0.7) 1px, transparent 2px);

    animation: mega-sparkle-burst 1s ease-out
animation: mega-sparkle-burst 1s ease-out 0.2s;
}

/* 内側爆発アニメーション */
@keyframes mega-sparkle-explosion {
    0% {
        opacity: 0;
        transform: scale(0.2) rotate(0deg);
    }
    15% {
        opacity: 1;
        transform: scale(0.6) rotate(60deg);
    }
    30% {
        opacity: 1;
        transform: scale(1.0) rotate(120deg);
    }
    50% {
        opacity: 1;
        transform: scale(1.4) rotate(200deg);
    }
    70% {
        opacity: 0.9;
        transform: scale(1.8) rotate(280deg);
    }
    85% {
        opacity: 0.6;
        transform: scale(2.2) rotate(340deg);
    }
    100% {
        opacity: 0;
        transform: scale(2.8) rotate(360deg);
    }
}

/* 外側大爆発アニメーション */
@keyframes mega-sparkle-burst {
    0% {
        opacity: 0;
        transform: scale(0.1) rotate(360deg);
    }
    20% {
        opacity: 0.8;
        transform: scale(0.8) rotate(280deg);
    }
    40% {
        opacity: 1;
        transform: scale(1.3) rotate(200deg);
    }
    60% {
        opacity: 1;
        transform: scale(1.8) rotate(120deg);
    }
    80% {
        opacity: 0.7;
        transform: scale(2.4) rotate(60deg);
    }
    95% {
        opacity: 0.3;
        transform: scale(3.0) rotate(20deg);
    }
    100% {
        opacity: 0;
        transform: scale(3.5) rotate(0deg);
    }
}
</style>