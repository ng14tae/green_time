<div class="hero min-h-screen bg-gradient-to-br from-blue-400 to-blue-600">
    <div class="hero-content text-center text-white">
        <div class="max-w-md py-16">
            <h1 class="text-5xl font-bold mb-8">Hello!</h1>
            <p class="text-xl mb-8">今日も素晴らしい一日にしましょう！</p>

            <!-- 緑ちゃんブース-->
            <img src="/assets/pochi.png"
                    alt="ポチ"
                    id="pochi-image"
                    class="mx-auto w-48 h-48 object-contain">

            <!-- チェックインブース-->
            <div class="work-summary mb-8 bg-white/20 rounded-lg p-6">
                <p class="text-lg">
                <%= Date.current.strftime("%Y年%m月%d日 (%a)") %></p><br>

                <% if @today_record.present? %>
                <p class="text-lg">現在時刻</p>
                <p class="text-3xl font-mono" id="current-time">
                    <%= Time.current.strftime("%H:%M:%S") %></p><br>

                <p class="text-lg mb-2">チェックイン時刻</p>
                <p class="text-3xl font-mono mb-4">
                    <%= @today_record.checkin_time.strftime("%H:%M") %>
                </p>

                <p class="text-lg mb-2">勤務時間</p>
                <p class="text-3xl font-mono" id="working-time"
                    data-checkin-time="<%= @today_record.checkin_time.in_time_zone('Asia/Tokyo').iso8601 %>">
                    <%= time_diff(@today_record.checkin_time, Time.current) %>
                </p>
                <% else %>
                <p class="text-lg">現在時刻</p>
                <p class="text-3xl font-mono" id="current-time">
                    <%= Time.current.strftime("%H:%M:%S") %>
                </p>
                <% end %>
            </div>

            <div id="checkin-section">
            <% if @today_record.present? %>
                <!-- チェックイン済みの場合 -->
                <button class="btn btn-lg w-full bg-gray-400 text-gray-600" disabled>
                    チェックイン済み
                </button>
            <% else %>
                <!-- 未チェックインの場合 -->
                <%= form_with url: checkin_checkinout_records_path,
                            method: :post,
                            data: { turbo_stream: true, turbo: true } do |f| %>
                <%= f.submit "チェックイン", id: "checkin-button",
                            class: "btn btn-primary btn-lg px-16 py-4 text-2xl shadow-lg w-full" %>
                <% end %>
            <% end %>
            </div>

        </div>
    </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
    document.addEventListener('click', function(event) {
        if (event.target.id === 'checkin-button') {
        const pochiImage = document.getElementById('pochi-image');
        if (pochiImage) {
            // グラデーション光る効果を追加
            pochiImage.classList.add('pochi-glow');

            // 0.8秒後にクラスを削除（アニメーション終了）
            setTimeout(function() {
            pochiImage.classList.remove('pochi-glow');
            }, 800);
        }
        }
    });
});
</script>

<style>
    #pochi-image {
        transition: all 0.6s ease;
  border-radius: 50%; /* 丸い画像の場合 */
}

/* 光る効果のクラス */
.pochi-glow {
    background: linear-gradient(45deg,
        #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7, #dda0dd, #ff6b6b);
    background-size: 400% 400%;
    animation: gradient-glow 0.8s ease-in-out;
    box-shadow:
        0 0 20px rgba(255, 107, 107, 0.6),
        0 0 40px rgba(78, 205, 196, 0.4),
        0 0 60px rgba(69, 183, 209, 0.3);
    transform: scale(1.1);
    padding: 8px; /* グラデーション境界線の太さ */
}

@keyframes gradient-glow {
    0% {
        background-position: 0% 50%;
        box-shadow: 0 0 10px rgba(255, 107, 107, 0.3);
    }
    25% {
        background-position: 25% 50%;
        box-shadow: 0 0 30px rgba(78, 205, 196, 0.6);
    }
    50% {
        background-position: 50% 50%;
        box-shadow: 0 0 40px rgba(69, 183, 209, 0.8);
    }
    75% {
        background-position: 75% 50%;
        box-shadow: 0 0 30px rgba(150, 206, 180, 0.6);
    }
    100% {
        background-position: 100% 50%;
        box-shadow: 0 0 10px rgba(255, 234, 167, 0.3);
    }
}
</style>